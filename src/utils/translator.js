// src/utils/translator.js
// Global Translation Dictionary - Indonesia â†” English

const translationDictionary = {
  // Navigation & Common UI
  "Home": "Beranda",
  "Shop": "Belanja",
  "About": "Tentang",
  "Contact": "Kontak",
  "Cart": "Keranjang",
  "Search": "Cari",
  "Search products...": "Cari produk...",
  "My Account": "Akun Saya",
  "Menu": "Menu",
  "Login": "Masuk",
  "Register": "Daftar",
  "Logout": "Keluar",
  "Dashboard": "Dasbor",
  "Profile": "Profil",
  "Settings": "Pengaturan",
  "Orders": "Pesanan",
  "Wishlist": "Daftar Keinginan",

  // Hero & Landing
  "Welcome to MAMZ": "Selamat Datang di MAMZ",
  "Discover Your Style": "Temukan Gaya Anda",
  "Shop Now": "Belanja Sekarang",
  "Explore Collection": "Jelajahi Koleksi",
  "New Arrivals": "Produk Baru",
  "Featured Products": "Produk Unggulan",
  "Best Sellers": "Penjualan Terbaik",

  // Categories
  "Men": "Pria",
  "Women": "Wanita",
  "Kids": "Anak",
  "Sale": "Diskon",
  "New": "Baru",
  "Shoes": "Sepatu",
  "Jackets": "Jaket",
  "T-Shirts": "Kaos",
  "Accessories": "Aksesoris",

  // Product Related
  "Add to Cart": "Tambah ke Keranjang",
  "Buy Now": "Beli Sekarang",
  "Out of Stock": "Stok Habis",
  "In Stock": "Tersedia",
  "Price": "Harga",
  "Size": "Ukuran",
  "Color": "Warna",
  "Quantity": "Jumlah",
  "Description": "Deskripsi",
  "Details": "Detail",
  "Reviews": "Ulasan",
  "Related Products": "Produk Terkait",
  "Product not found": "Produk tidak ditemukan",

  // Cart & Checkout
  "Your Cart": "Keranjang Anda",
  "Shopping Cart": "Keranjang Belanja",
  "Cart is empty": "Keranjang kosong",
  "Remove": "Hapus",
  "Update": "Perbarui",
  "Subtotal": "Subtotal",
  "Total": "Total",
  "Checkout": "Checkout",
  "Continue Shopping": "Lanjut Belanja",
  "Shipping": "Pengiriman",
  "Payment": "Pembayaran",
  "Order Summary": "Ringkasan Pesanan",
  "Billing Address": "Alamat Penagihan",
  "Shipping Address": "Alamat Pengiriman",
  "Payment Method": "Metode Pembayaran",
  "Place Order": "Buat Pesanan",
  "Order Confirmation": "Konfirmasi Pesanan",
  "Thank you for your order!": "Terima kasih atas pesanan Anda!",
  "Order Number": "Nomor Pesanan",

  // Forms
  "Email": "Email",
  "Password": "Kata Sandi",
  "Confirm Password": "Konfirmasi Kata Sandi",
  "First Name": "Nama Depan",
  "Last Name": "Nama Belakang",
  "Phone": "Telepon",
  "Address": "Alamat",
  "City": "Kota",
  "State": "Provinsi",
  "ZIP Code": "Kode Pos",
  "Country": "Negara",
  "Submit": "Kirim",
  "Cancel": "Batal",
  "Save": "Simpan",
  "Edit": "Edit",
  "Delete": "Hapus",
  "Required": "Wajib",
  "Optional": "Opsional",

  // Authentication
  "Sign In": "Masuk",
  "Sign Up": "Daftar",
  "Forgot Password?": "Lupa Kata Sandi?",
  "Remember Me": "Ingat Saya",
  "Create Account": "Buat Akun",
  "Already have an account?": "Sudah punya akun?",
  "Don't have an account?": "Belum punya akun?",
  "Reset Password": "Reset Kata Sandi",
  "Send Reset Link": "Kirim Link Reset",
  "Verify Email": "Verifikasi Email",
  "Check your email": "Periksa email Anda",

  // Support & Help
  "Support": "Dukungan",
  "Help": "Bantuan",
  "FAQ": "FAQ",
  "Frequently Asked Questions": "Pertanyaan yang Sering Diajukan",
  "We've got answers to all your questions about MAMZ products, shipping, and support.": "Kami bantu jawab semua hal seputar produk, pengiriman, dan layanan MAMZ.",
  "Search your question...": "Cari pertanyaan...",
  "All": "Semua",
  "Products": "Produk",
  "Shipping": "Pengiriman",
  "Returns": "Pengembalian",
  "Account": "Akun",
  "Orders": "Pesanan",
  "General": "Umum",
  "No results found": "Tidak ada hasil ditemukan",
  "Try different keywords": "Coba kata kunci yang berbeda",
  "Still need help?": "Masih butuh bantuan?",
  "Our support team is here to help you 24/7": "Tim dukungan kami siap membantu Anda 24/7",
  "Contact Us": "Hubungi Kami",
  "Track Order": "Lacak Pesanan",
  "Size Guide": "Panduan Ukuran",
  "Shipping Info": "Info Pengiriman",
  "Privacy Policy": "Kebijakan Privasi",
  "Terms of Service": "Syarat Layanan",
  "Cookie Policy": "Kebijakan Cookie",
  "Accessibility": "Aksesibilitas",

  // Careers
  "Careers": "Karir",
  "Join Our Team": "Bergabunglah dengan Tim Kami",
  "Open Positions": "Posisi Terbuka",
  "Apply Now": "Lamar Sekarang",
  "Job Description": "Deskripsi Pekerjaan",
  "Requirements": "Persyaratan",
  "Benefits": "Keuntungan",

  // Footer
  "Follow Us": "Ikuti Kami",
  "Newsletter": "Newsletter",
  "Subscribe": "Berlangganan",
  "Enter your email": "Masukkan email Anda",
  "Stay Updated": "Tetap Update",
  "Customer Service": "Layanan Pelanggan",
  "About Us": "Tentang Kami",
  "Store Locator": "Pencari Toko",
  "Student Discount": "Diskon Mahasiswa",
  "Affiliate Program": "Program Afiliasi",
  "Company": "Perusahaan",
  "Legal": "Hukum",
  "About MAMZ": "Tentang MAMZ",
  "Our Story": "Cerita Kami",
  "Bold style, quality craftsmanship. Redefining streetwear fashion.": "Gaya berani, kerajinan berkualitas. Mendefinisikan ulang fashion streetwear.",
  "Scroll to top": "Gulir ke atas",

  // Messages & Alerts
  "Success": "Berhasil",
  "Error": "Error",
  "Warning": "Peringatan",
  "Info": "Info",
  "Loading...": "Memuat...",
  "Please wait...": "Mohon tunggu...",
  "Something went wrong": "Terjadi kesalahan",
  "Try again": "Coba lagi",
  "Go back": "Kembali",

  // Sustainability
  "Sustainability": "Keberlanjutan",
  "Our Commitment": "Komitmen Kami",
  "Eco-Friendly": "Ramah Lingkungan",
  "Sustainable Materials": "Bahan Berkelanjutan",

  // News & Blog
  "News": "Berita",
  "Latest News": "Berita Terbaru",
  "Read More": "Baca Selengkapnya",

  // Store Locator
  "Store Locator": "Pencari Toko",
  "Find a Store": "Temukan Toko",
  "Near You": "Dekat Anda",

  // Student Discount
  "Student Discount": "Diskon Mahasiswa",
  "Verify Student Status": "Verifikasi Status Mahasiswa",

  // Affiliate Program
  "Affiliate Program": "Program Afiliasi",
  "Earn Money": "Dapatkan Uang",
  "Join Now": "Bergabung Sekarang",

  // Additional common phrases
  "Yes": "Ya",
  "No": "Tidak",
  "OK": "OK",
  "Close": "Tutup",
  "Open": "Buka",
  "Next": "Selanjutnya",
  "Previous": "Sebelumnya",
  "Back": "Kembali",
  "Forward": "Maju",
  "Up": "Atas",
  "Down": "Bawah",
  "Left": "Kiri",
  "Right": "Kanan",
  "Top": "Atas",
  "Bottom": "Bawah",
  "Center": "Tengah",
  "All": "Semua",
  "None": "Tidak Ada",
  "Any": "Apa Saja",
  "Other": "Lainnya",
  "More": "Lebih Banyak",
  "Less": "Lebih Sedikit",
  "View": "Lihat",
  "Show": "Tampilkan",
  "Hide": "Sembunyikan",
  "Expand": "Perluas",
  "Collapse": "Ciutkan",
  "Filter": "Filter",
  "Sort": "Urutkan",
  "Sort by": "Urutkan berdasarkan",
  "Name": "Nama",
  "Date": "Tanggal",
  "Status": "Status",
  "Active": "Aktif",
  "Inactive": "Tidak Aktif",
  "Pending": "Menunggu",
  "Completed": "Selesai",
  "Cancelled": "Dibatalkan",
  "Processing": "Memproses",
  "Shipped": "Dikirim",
  "Delivered": "Diterima",
  "Returned": "Dikembalikan",
  "Refunded": "Dikembalikan Dana",
  "Products": "Produk"
};

// Create reverse dictionary for Indonesian to English
const reverseDictionary = {};
Object.keys(translationDictionary).forEach(key => {
  const value = translationDictionary[key];
  reverseDictionary[value] = key;
});

// Language detection patterns
const indonesianPatterns = [
  /[aiueo]/gi, // Vowels
  /nya|kah|lah|pun|kan|an|in|un|en|on/gi, // Common suffixes
  /\b(aku|kamu|dia|kami|mereka|ini|itu|apa|siapa|dimana|kapan|bagaimana)\b/gi, // Common words
];

const englishPatterns = [
  /[aeiou]/gi, // Vowels
  /the|and|or|but|in|on|at|to|for|of|with|by/gi, // Common words
  /\b(is|are|was|were|be|been|being|have|has|had|do|does|did|will|would|can|could|should|may|might|must)\b/gi, // Auxiliary verbs
];

// Auto-detect language of input text
function detectLanguage(text) {
  if (!text || typeof text !== 'string') return 'en';

  const words = text.toLowerCase().split(/\s+/);
  let indonesianScore = 0;
  let englishScore = 0;

  words.forEach(word => {
    // Check Indonesian patterns
    indonesianPatterns.forEach(pattern => {
      if (pattern.test(word)) indonesianScore++;
    });

    // Check English patterns
    englishPatterns.forEach(pattern => {
      if (pattern.test(word)) englishScore++;
    });

    // Check dictionary presence
    if (translationDictionary[word] || reverseDictionary[word]) {
      if (translationDictionary[word]) englishScore += 2;
      if (reverseDictionary[word]) indonesianScore += 2;
    }
  });

  return indonesianScore > englishScore ? 'id' : 'en';
}

// Main translation function
function translate(text, targetLanguage = null) {
  if (!text || typeof text !== 'string') return text;

  // If no target language specified, auto-detect and translate to opposite
  if (!targetLanguage) {
    const detectedLang = detectLanguage(text);
    targetLanguage = detectedLang === 'en' ? 'id' : 'en';
  }

  // Direct lookup in dictionary
  if (targetLanguage === 'id' && translationDictionary[text]) {
    return translationDictionary[text];
  }

  if (targetLanguage === 'en' && reverseDictionary[text]) {
    return reverseDictionary[text];
  }

  // Handle multi-word phrases by checking substrings
  const words = text.split(/\s+/);
  if (words.length > 1) {
    const translatedWords = words.map(word => {
      if (targetLanguage === 'id' && translationDictionary[word]) {
        return translationDictionary[word];
      }
      if (targetLanguage === 'en' && reverseDictionary[word]) {
        return reverseDictionary[word];
      }
      return word;
    });

    // If any words were translated, return the modified text
    if (translatedWords.some((word, index) => word !== words[index])) {
      return translatedWords.join(' ');
    }
  }

  // If no translation found, return original text
  return text;
}

// Add new translation to dictionary
function addTranslation(english, indonesian) {
  if (english && indonesian) {
    translationDictionary[english] = indonesian;
    reverseDictionary[indonesian] = english;
  }
}

// Get all translations
function getAllTranslations() {
  return { ...translationDictionary };
}

// Check if text is translatable
function isTranslatable(text) {
  return !!(translationDictionary[text] || reverseDictionary[text]);
}

export {
  translate,
  detectLanguage,
  addTranslation,
  getAllTranslations,
  isTranslatable,
  translationDictionary,
  reverseDictionary
};
